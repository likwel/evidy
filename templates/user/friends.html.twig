{% extends 'base.html.twig' %}

{% block title %}Hello UserController!
{% endblock %}

{% block body %}
	<style></style>

	<body class="body">
		{% include "main/navbar.html.twig" %}
		<div class="container contenu">
			<div
				class="row g-4">
				<!-- Profil-->
				{% include "main/leftprofil.html.twig" %}
				<!-- End Profil-->

				<!-- Main Center-->

					<div class="col-lg-8 bg-white rounded-3 mb-1"> <ul class="nav nav-tabs mt-2">
						<li class="nav-item">
							<a class="nav-link active" aria-current="page" href="#" onclick="openNav(this,'all_friends')">Tous les amis</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#" onclick="openNav(this,'demandes')">Invitation envoyées</a>
						</li>
						<li class="nav-item">
							<a class="nav-link" href="#" onclick="openNav(this,'invitation')">Invitation réçues</a>
						</li>
					</ul>

					<div class="row" id="all_friends">
						<div class="col-md-12">
							<div class="user-dashboard-info-box table-responsive mb-0 bg-white p-4 shadow-sm">
								<table class="table manage-candidates-top mb-0">
									<thead>
										<tr>
											<th>Nom et prenom</th>
											<th class="text-center">Status</th>
											<th class="action text-right">Action</th>
										</tr>
									</thead>
									<tbody>
										<!--boucle for-->

										{% for friend in friends %}

                                            {% if friend.is_wait == 0 %}

											<tr class="candidates-list">
												<td class="title">
													<div class="thumb">
														<img class="img-fluid" src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="">
													</div>
													<div class="candidate-list-details">
														<div class="candidate-list-info">
															<div class="candidate-list-title">
																<h5 class="mb-0">
																	<a href="#">{{friend[0].firstname}}
																		{{friend[0].lastname}}</a>
																</h5>
															</div>
															<div class="candidate-list-option">
																<ul class="list-unstyled">
																	<li>
																		<i class="fas fa-filter pr-1"></i>@{{friend[0].pseudo}}</li>

																</ul>
															</div>
														</div>
													</div>
												</td>
												<td class="candidate-list-favourite-time text-center">
													<span class="badge text-bg-success order-1">Active</span>
												</td>
												<td>
													<ul class="list-unstyled mb-0 d-flex justify-content-end">
														<li>
															<a href="#" class="text-primary" data-toggle="tooltip" title="" data-original-title="view">
																<i class="far fa-eye"></i> Voir profil
															</a>
														</li>
														<li>
															<a href="#" class="text-info" onclick="retirerAmis({{friend.user_id}})">
																<i class="bi bi-trash3"></i> Rétirer
															</a>
														</li>
													</ul>
												</td>
											</tr>
                                        {% endif %}

										{% endfor %}

									</tbody>
								</table>
								<div class="text-center mt-3 mt-sm-3">
									<ul class="pagination justify-content-center mb-0">
										<li class="page-item disabled">
											<span class="page-link">Prev</span>
										</li>
										<li class="page-item active" aria-current="page">
											<span class="page-link">1
											</span>
											<span class="sr-only">(current)</span>
										</li>
										<li class="page-item">
											<a class="page-link" href="#">2</a>
										</li>
										<li class="page-item">
											<a class="page-link" href="#">3</a>
										</li>
										<li class="page-item">
											<a class="page-link" href="#">...</a>
										</li>
										<li class="page-item">
											<a class="page-link" href="#">25</a>
										</li>
										<li class="page-item">
											<a class="page-link" href="#">Next</a>
										</li>
									</ul>
								</div>
							</div>
						</div>
					</div>

                    <div class="row" id="demandes" style="display:none;">
						<div class="col-md-12">
							<div class="user-dashboard-info-box table-responsive mb-0 bg-white p-4 shadow-sm">
								<table class="table manage-candidates-top mb-0">
									<thead>
										<tr>
											<th>Nom et prenom</th>
											<th class="text-center">Status</th>
											<th class="action text-right">Action</th>
										</tr>
									</thead>
									<tbody>
										<!--boucle for-->

										{% for friend in friends %}

                                        {% if friend.is_follower == 0 %}

											<tr class="candidates-list">
												<td class="title">
													<div class="thumb">
														<img class="img-fluid" src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="">
													</div>
													<div class="candidate-list-details">
														<div class="candidate-list-info">
															<div class="candidate-list-title">
																<h5 class="mb-0">
																	<a href="#">{{friend[0].firstname}}
																		{{friend[0].lastname}}</a>
																</h5>
															</div>
															<div class="candidate-list-option">
																<ul class="list-unstyled">
																	<li>
																		<i class="fas fa-filter pr-1"></i>@{{friend[0].pseudo}}</li>

																</ul>
															</div>
														</div>
													</div>
												</td>
												<td class="candidate-list-favourite-time text-center">
													<span class="badge text-bg-success order-1">{% if friend.is_wait == 1 %}En attente {% else %}Confirmé{% endif %}</span>
												</td>
												<td>
													{% if friend.is_wait == 1 %}

                                                        <ul class="list-unstyled mb-0 d-flex justify-content-end">
                                                            <li>
                                                                <a href="#" class="text-danger" onclick="annulerDemande({{friend.user_id}})">
                                                                    <i class="bi bi-trash3"></i> Annuler la demande
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    {% else %}
                                                        <ul class="list-unstyled mb-0 d-flex justify-content-end">
                                                            <li>
                                                                <a href="#" class="text-primary">
                                                                    <i class="bi bi-check2-circle"></i> Déjà confirmé
                                                                </a>
                                                            </li>
                                                        </ul>
                                                    {% endif %}
												</td>
											</tr>
                                            {% endif %}

										{% endfor %}

									</tbody>
								</table>
								<div class="text-center mt-3 mt-sm-3">
									<ul class="pagination justify-content-center mb-0">
										<li class="page-item disabled">
											<span class="page-link">Prev</span>
										</li>
										<li class="page-item active" aria-current="page">
											<span class="page-link">1
											</span>
											<span class="sr-only">(current)</span>
										</li>
										<li class="page-item">
											<a class="page-link" href="#">2</a>
										</li>
										<li class="page-item">
											<a class="page-link" href="#">3</a>
										</li>
										<li class="page-item">
											<a class="page-link" href="#">...</a>
										</li>
										<li class="page-item">
											<a class="page-link" href="#">25</a>
										</li>
										<li class="page-item">
											<a class="page-link" href="#">Next</a>
										</li>
									</ul>
								</div>
							</div>
						</div>
					</div>

                    <div class="row" id="invitation" style="display:none;">
						<div class="col-md-12">
							<div class="user-dashboard-info-box table-responsive mb-0 bg-white p-4 shadow-sm">
								<table class="table manage-candidates-top mb-0">
									<thead>
										<tr>
											<th>Nom et prenom</th>
											<th class="text-center">Status</th>
											<th class="action text-right">Action</th>
										</tr>
									</thead>
									<tbody>
										<!--boucle for-->

										{% for friend in friends %}

                                            {% if friend.is_follower == 1 %}

											<tr class="candidates-list">
												<td class="title">
													<div class="thumb">
														<img class="img-fluid" src="https://bootdey.com/img/Content/avatar/avatar7.png" alt="">
													</div>
													<div class="candidate-list-details">
														<div class="candidate-list-info">
															<div class="candidate-list-title">
																<h5 class="mb-0">
																	<a href="#">{{friend[0].firstname}}
																		{{friend[0].lastname}}</a>
																</h5>
															</div>
															<div class="candidate-list-option">
																<ul class="list-unstyled">
																	<li>
																		<i class="fas fa-filter pr-1"></i>@{{friend[0].pseudo}}</li>

																</ul>
															</div>
														</div>
													</div>
												</td>
												<td class="candidate-list-favourite-time text-center">
													<span class="badge text-bg-success order-1">{% if friend.is_wait == 1 %}En attente {% else %}Confirmé{% endif %}</span>
												</td>
												<td>
                                                {% if friend.is_wait == 1 %}

                                                    <ul class="list-unstyled mb-0 d-flex justify-content-end">
														<li>
															<a href="#" class="text-primary" onclick="accepterInvitation({{friend.user_id}})">
																<i class="bi bi-check2-circle"></i> Accepter
															</a>
														</li>
														<li>
															<a href="#" class="text-danger" onclick="supprimerInvitation({{friend.user_id}})" >
																<i class="bi bi-trash3"></i> Supprimer
															</a>
														</li>
													</ul>
                                                {% else %}
                                                    <ul class="list-unstyled mb-0 d-flex justify-content-end">
														<li>
															<a href="#" class="text-primary">
																<i class="bi bi-check2-circle"></i> Déjà confirmé
															</a>
														</li>
													</ul>
                                                {% endif %}
													
												</td>
											</tr>
                                            {% endif %}

										{% endfor %}

									</tbody>
								</table>
								<div class="text-center mt-3 mt-sm-3">
									<ul class="pagination justify-content-center mb-0">
										<li class="page-item disabled">
											<span class="page-link">Prev</span>
										</li>
										<li class="page-item active" aria-current="page">
											<span class="page-link">1
											</span>
											<span class="sr-only">(current)</span>
										</li>
										<li class="page-item">
											<a class="page-link" href="#">2</a>
										</li>
										<li class="page-item">
											<a class="page-link" href="#">3</a>
										</li>
										<li class="page-item">
											<a class="page-link" href="#">...</a>
										</li>
										<li class="page-item">
											<a class="page-link" href="#">25</a>
										</li>
										<li class="page-item">
											<a class="page-link" href="#">Next</a>
										</li>
									</ul>
								</div>
							</div>
						</div>
					</div>


				</div>

			</div>

		</div>

		<script>
			document.querySelectorAll("body > div.container.contenu > div > div.col-lg-3 > div > div.profil-menu > div > a.list-group-item-b").forEach(elem => {
                elem.classList.remove("menu-active");
                })
                document.querySelector("body > div.container.contenu > div > div.col-lg-3 > div > div.profil-menu > div > a:nth-child(2)").classList.add("menu-active")
		
        function openNav(elem, type){
            document.querySelectorAll("body > div.container.contenu > div > div.col-lg-8.bg-white.rounded-3.mb-1 > ul > li >a").forEach(element=>{
                element.classList.remove("active");
            })
            elem.classList.add("active");
            if(type=="all_friends"){
                document.querySelector("#all_friends").style.display="block";
                document.querySelector("#demandes").style.display="none";
                document.querySelector("#invitation").style.display="none";
            }else if(type=="demandes"){
                document.querySelector("#all_friends").style.display="none";
                document.querySelector("#demandes").style.display="block";
                document.querySelector("#invitation").style.display="none";
            }else{
                document.querySelector("#all_friends").style.display="none";
                document.querySelector("#demandes").style.display="none";
                document.querySelector("#invitation").style.display="block";
            }
            
        }
        </script>
	</body>
{% endblock %}
